/*
 * KTML_Manager.java
 *
 * Created on November 3, 2002, 2:21 PM
 */

package kinetic.util;
import kinetic.*;
import java.util.ArrayList;
import java.lang.reflect.Field;

/** Experimental and under development.  Do not use.
 * @author Johnny Lee
 */
public class KTML_Manager {
    
    private Sequence seq = new Sequence();
    private KineticString ks = new KineticString();
    /** Creates a new instance of KTML_Manager */
    public KTML_Manager() {
    }
    
    public void generateKTML(KineticObject o){
        Class c = o.getClass();
        out(c.getName());
        Field[] fields = c.getFields();
        for (int i = 0; i < fields.length; i++) {
         String fieldName = fields[i].getName();
         Class typeClass = fields[i].getType();
         String fieldType = typeClass.getName();
         out(fieldName);
        }
        /*
        ArrayList al = o.getPropertyList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((KineticProperty)al.get(i));
        }
        al = o.getTimeFilterList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((TimeFilter)al.get(i));
        }*/
        if(c.isInstance(seq)){
            ArrayList al = ((Sequence)o).cast;
            for(int i = 0; i < al.size(); i++){
                generateKTML((KineticObject)al.get(i));
            }
        }
    }
    public void generateKTML(KineticProperty p){
        out(p.getClass().getName());
        //do manual variables

        Field[] fields = p.getClass().getDeclaredFields();
        for (int i = 0; i < fields.length; i++) {
         String fieldName = fields[i].getName();
         Class typeClass = fields[i].getType();
         String fieldType = typeClass.getName();
         System.out.println("Name: " + fieldName + ", Type: " + fieldType);
        }

        ArrayList al = p.getBehaviorList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((Behavior)al.get(i));
        }
    }
    public void generateKTML(Behavior b){
        out(b.getClass().getName());
        ArrayList al = b.getPropertyList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((KineticProperty)al.get(i));
        }
        al = b.getTimeFilterList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((TimeFilter)al.get(i));
        }
    }
    public void generateKTML(TimeFilter tf){
        out(tf.getClass().getName());
        ArrayList al = tf.getPropertyList();
        for(int i = 0; i < al.size(); i++){
            generateKTML((KineticProperty)al.get(i));
        }
    }
        
    public void readKTML(String s){
        
    }   
    
    public void out(String s){
        System.out.println(s);
    }
}
